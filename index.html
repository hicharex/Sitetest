<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Liens Traçables</title>
</head>
<body>
  <h1>Exemple de liens traçables</h1>
  <ul>
    <li><a href="#" onclick="trackClick('link1', 'user123')">Lien 1</a></li>
    <li><a href="#" onclick="trackClick('link2', 'user456')">Lien 2</a></li>
    <li><a href="#" onclick="trackClick('link3', 'user789')">Lien 3</a></li>
    <li><a href="#" onclick="trackClick('link-anonyme', 'anonyme')">Lien anonyme</a></li>
  </ul>

  <script>
    const SUPABASE_URL = 'https://sweubjmmzxbrdjvahqmt.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN3ZXViam1tenhicmRqdmFocW10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg2MDU5NzcsImV4cCI6MjA2NDE4MTk3N30.siurhNVP44cmlHrWTVSQxys_S1WqDJ16f8wELTNTsTU';

    function trackClick(linkId, userId) {
      fetch(`${SUPABASE_URL}/rest/v1/clicks`, {
        method: 'POST',
        headers: {
          apikey: SUPABASE_KEY,
          Authorization: `Bearer ${SUPABASE_KEY}`,
          'Content-Type': 'application/json',
          Prefer: 'return=minimal'
        },
        body: JSON.stringify({
          link_id: linkId,
          user_id: userId,
          timestamp: new Date().toISOString()
        })
      }).then(() => alert("Clic enregistré !"));
    }
  </script>
</body>
</html>
